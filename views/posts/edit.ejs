<% layout("layouts/boilerplate") -%>
<h1>Edit Post!</h1>
<!-- enctype in modo da inviare i file selezionati nella richiesta per uploadarli -->
<form
  action="/posts/<%= post.id %>?_method=PUT"
  method="POST"
  id="editForm"
  enctype="multipart/form-data"
>
  <div>
    <input
      type="text"
      placeholder="Title"
      name="post[title]"
      value="<%= post.title %>"
    />
  </div>
  <div>
    <input
      type="number"
      placeholder="Price"
      name="post[price]"
      value="<%= post.price %>"
    />
  </div>
  <div>
    <input
      type="file"
      name="images"
      accept="image/*"
      id="imageUpload"
      multiple
    />
    <div>
      <% post.images.forEach(function(img, i){ %>
      <img src="<%= img.url %>" alt="SurfBoardImage" width="100px" />
      <label for="image<%= i %>">Delete?</label>
      <input
        class="deleteImageCheckbox"
        type="checkbox"
        name="deleteImages[]"
        id="image<%= i %>"
        value="<%= img.public_id %>"
      />
      <% }) %>
    </div>
  </div>

  <div>
    <textarea
      name="post[description]"
      placeholder="Description"
      id=""
      cols="30"
      rows="10"
    >
<%= post.description %></textarea
    >
  </div>
  <div>
    <input
      type="text"
      placeholder="Location"
      name="post[location]"
      value="<%= post.location %>"
    />
  </div>
  <input type="submit" value="submit" />
</form>
<script src="/javascripts/post-edit.js"></script>
