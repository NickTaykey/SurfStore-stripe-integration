<% layout("layouts/boilerplate") -%> <% include ../partials/postPagination %>
<h1>Index Page!</h1>
<div class="container-fluid">
  <div class="row">
    <div class="col-4">
      <% include ../partials/searchFilter.ejs %>
    </div>
    <div class="col-8">
      <div id="map"></div>
    </div>
  </div>
</div>
<a href="/posts/new">New Post</a>
<% posts.docs.forEach(post=>{ %>

<h2><%= post.title %></h2>
<div>Price: <%= post.price %></div>
<div><%= post.description %></div>
<div><%= post.location %></div>
<div><a href="/posts/<%= post.id %>">View More</a></div>

<% }) %> <% include ../partials/postPagination %>

<script>
  mapboxgl.accessToken = "<%= mapBoxToken %>";
  var posts = {features: <%- JSON.stringify(posts.docs) %>};
</script>
<script src="/javascripts/allPostsClusterMap.js"></script>
